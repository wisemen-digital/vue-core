import type {
PaginatedData,
PaginationOptions,
} from '@wisemen/vue-core'
import type { UseQueryReturnType } from '@wisemen/vue-core-query'
import { useQuery } from '@wisemen/vue-core-query'
import type { ComputedRef } from 'vue'

import type { <%= pascalCase %>Index } from '@/models/<%= kebabCase %>/index/<%= camelCase %>Index.model'
import type { <%= pascalCase %>IndexPagination } from '@/models/<%= kebabCase %>/pagination/<%= camelCase %>IndexPagination.model'
import { <%= pascalCase %>Service } from '@/modules/<%= kebabCase %>/api/services/<%= camelCase %>.service'

export function use<%= pascalCase %>IndexQuery(
  paginationOptions: ComputedRef<PaginationOptions<<%= pascalCase %>IndexPagination>>,
    ): UseQueryReturnType<PaginatedData<<%= pascalCase %>Index>> {
    return useQuery<PaginatedData<<%= pascalCase %>Index>>({
      queryFn: async () => {
        return await <%= pascalCase %>Service.getIndex(paginationOptions.value)
      },
      queryKey: {
        <%= camelCase %>Index: {
          paginationOptions,
      },
    },
  })
}
